package edu.nc.travelplanner;

import edu.nc.travelplanner.dao.json.JsonFileUtil;
import edu.nc.travelplanner.model.response.Response;
import edu.nc.travelplanner.model.response.TextResponse;
import edu.nc.travelplanner.model.source.filter.GetValueIfContainsInArrayFromJsonResponseFilter;
import edu.nc.travelplanner.model.source.filter.ListToJsonObjectListResponseFilter;
import edu.nc.travelplanner.model.source.filter.ListToMapJsonResponseFilter;
import edu.nc.travelplanner.model.source.filter.ListToMapMultipleJsonResponseFilter;
import org.apache.commons.lang.StringEscapeUtils;
import org.junit.Test;

import java.util.LinkedList;

public class FilterUtilTests {

    @Test
    public void canGetValueByPath(){
        String json = "[{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":25571.6,\"hotelId\":47275599,\"stars\":5,\"priceAvg\":25571.6,\"locationId\":12224,\"pricePercentile\":{\"35\":25571.6,\"75\":25571.6,\"99\":25571.6,\"10\":25571.6,\"3\":25571.6,\"50\":25571.6},\"hotelName\":\"\\u0420\\u0430\\u043c\\u0430\\u0434\\u0430 \\u041f\\u043b\\u0430\\u0437\\u0430 \\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436 \\u0421\\u0438\\u0442\\u0438 \\u0426\\u0435\\u043d\\u0442\\u0440\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":21079.29,\"hotelId\":713696,\"stars\":5,\"priceAvg\":21079.29,\"locationId\":12224,\"pricePercentile\":{\"35\":21079.29,\"75\":21079.29,\"99\":21079.29,\"10\":21079.29,\"3\":21079.29,\"50\":21079.29},\"hotelName\":\"\\u0410\\u0440\\u0442 \\u041e\\u0442\\u0435\\u043b\\u044c\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":18314.8,\"hotelId\":28796991,\"stars\":4,\"priceAvg\":18314.8,\"locationId\":12224,\"pricePercentile\":{\"35\":18314.8,\"75\":18314.8,\"99\":18314.8,\"10\":18314.8,\"3\":18314.8,\"50\":18314.8},\"hotelName\":\"Mercure \\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436 \\u0426\\u0435\\u043d\\u0442\\u0440\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":15550.3,\"hotelId\":713692,\"stars\":4,\"priceAvg\":15550.3,\"locationId\":12224,\"pricePercentile\":{\"35\":15550.3,\"75\":15550.3,\"99\":15550.3,\"10\":15550.3,\"3\":15550.3,\"50\":15550.3},\"hotelName\":\"\\u0410\\u043f\\u0430\\u0440\\u0442 \\u041e\\u0442\\u0435\\u043b\\u044c \\u0424\\u0430\\u0440\\u0430\\u043e\\u043d\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":17623.67,\"hotelId\":521939,\"stars\":4,\"priceAvg\":17623.67,\"locationId\":12224,\"pricePercentile\":{\"35\":17623.67,\"75\":17623.67,\"99\":17623.67,\"10\":17623.67,\"3\":17623.67,\"50\":17623.67},\"hotelName\":\"\\u0411\\u0435\\u043d\\u0435\\u0444\\u0438\\u0442 \\u041f\\u043b\\u0430\\u0437\\u0430 \\u041a\\u043e\\u043d\\u0433\\u0440\\u0435\\u0441\\u0441 \\u041e\\u0442\\u0435\\u043b\\u044c\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":19697.05,\"hotelId\":713708,\"stars\":4,\"priceAvg\":19697.05,\"locationId\":12224,\"pricePercentile\":{\"35\":19697.05,\"75\":19697.05,\"99\":19697.05,\"10\":19697.05,\"3\":19697.05,\"50\":19697.05},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c O'\\u0425\\u0430\\u0440\\u0430\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":23498.23,\"hotelId\":713691,\"stars\":4,\"priceAvg\":23498.23,\"locationId\":12224,\"pricePercentile\":{\"35\":23498.23,\"75\":23498.23,\"99\":23498.23,\"10\":23498.23,\"3\":23498.23,\"50\":23498.23},\"hotelName\":\"\\u041f\\u0435\\u0442\\u0440\\u043e\\u0432\\u0441\\u043a\\u0438\\u0439 \\u041f\\u0430\\u0441\\u0441\\u0430\\u0436\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":18660.36,\"hotelId\":1495113,\"stars\":4,\"priceAvg\":18660.36,\"locationId\":12224,\"pricePercentile\":{\"35\":18660.36,\"75\":18660.36,\"99\":18660.36,\"10\":18660.36,\"3\":18660.36,\"50\":18660.36},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c Valeri Classic\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":17623.67,\"hotelId\":8693526,\"stars\":3,\"priceAvg\":17623.67,\"locationId\":12224,\"pricePercentile\":{\"35\":17623.67,\"75\":17623.67,\"99\":17623.67,\"10\":17623.67,\"3\":17623.67,\"50\":17623.67},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c \\u0425\\u043e\\u043b\\u0438\\u0434\\u0435\\u0439 \\u0418\\u043d\\u043d \\u042d\\u043a\\u0441\\u043f\\u0440\\u0435\\u0441\\u0441 \\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436 \\u2013 \\u041a\\u0438\\u0440\\u043e\\u0432\\u0430\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":17623.67,\"hotelId\":5827375,\"stars\":3,\"priceAvg\":17623.67,\"locationId\":12224,\"pricePercentile\":{\"35\":17623.67,\"75\":17623.67,\"99\":17623.67,\"10\":17623.67,\"3\":17623.67,\"50\":17623.67},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c Hampton by Hilton \\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":16932.55,\"hotelId\":14341278,\"stars\":3,\"priceAvg\":16932.55,\"locationId\":12224,\"pricePercentile\":{\"35\":16932.55,\"75\":16932.55,\"99\":16932.55,\"10\":16932.55,\"3\":16932.55,\"50\":16932.55},\"hotelName\":\"\\u041d\\u0430 \\u0412\\u0435\\u0440\\u0430\\u043d\\u0434\\u0430\\u0445\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":15204.74,\"hotelId\":12185167,\"stars\":3,\"priceAvg\":15204.74,\"locationId\":12224,\"pricePercentile\":{\"35\":15204.74,\"75\":15204.74,\"99\":15204.74,\"10\":15204.74,\"3\":15204.74,\"50\":15204.74},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c \\u0423\\u044e\\u0442\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":8984.62,\"hotelId\":713685,\"stars\":3,\"priceAvg\":8984.62,\"locationId\":12224,\"pricePercentile\":{\"35\":8984.62,\"75\":8984.62,\"99\":8984.62,\"10\":8984.62,\"3\":8984.62,\"50\":8984.62},\"hotelName\":\"\\u0410\\u0417\\u0418\\u041c\\u0423\\u0422 \\u041e\\u0442\\u0435\\u043b\\u044c \\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":16241.42,\"hotelId\":713689,\"stars\":3,\"priceAvg\":16241.42,\"locationId\":12224,\"pricePercentile\":{\"35\":16241.42,\"75\":16241.42,\"99\":16241.42,\"10\":16241.42,\"3\":16241.42,\"50\":16241.42},\"hotelName\":\"\\u0413\\u043e\\u0441\\u0442\\u0435\\u0432\\u043e\\u0439 \\u0414\\u043e\\u043c \\u0424\\u0430\\u0440\\u0430\\u043e\\u043d\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":12094.68,\"hotelId\":713695,\"stars\":2,\"priceAvg\":12094.68,\"locationId\":12224,\"pricePercentile\":{\"35\":12094.68,\"75\":12094.68,\"99\":12094.68,\"10\":12094.68,\"3\":12094.68,\"50\":12094.68},\"hotelName\":\"\\u041c\\u0438\\u043d\\u0438-\\u0433\\u043e\\u0441\\u0442\\u0438\\u043d\\u0438\\u0446\\u0430 \\u0414\\u0443\\u0431\\u0440\\u0430\\u0432\\u0430\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":8639.06,\"hotelId\":1249550248,\"stars\":2,\"priceAvg\":8639.06,\"locationId\":12224,\"pricePercentile\":{\"35\":8639.06,\"75\":8639.06,\"99\":8639.06,\"10\":8639.06,\"3\":8639.06,\"50\":8639.06},\"hotelName\":\"\\u0410 \\u041e\\u0442\\u0435\\u043b\\u044c \\u0411\\u0420\\u041d\\u041e\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":7256.81,\"hotelId\":1198028,\"stars\":2,\"priceAvg\":7256.81,\"locationId\":12224,\"pricePercentile\":{\"35\":7256.81,\"75\":7256.81,\"99\":7256.81,\"10\":7256.81,\"3\":7256.81,\"50\":7256.81},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c 36\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":10712.43,\"hotelId\":606125,\"stars\":2,\"priceAvg\":10712.43,\"locationId\":12224,\"pricePercentile\":{\"35\":10712.43,\"75\":10712.43,\"99\":10712.43,\"10\":10712.43,\"3\":10712.43,\"50\":10712.43},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c \\u00ab\\u0422\\u0438\\u0431\\u0435\\u0442\\u00bb\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":8984.62,\"hotelId\":47210442,\"stars\":2,\"priceAvg\":8984.62,\"locationId\":12224,\"pricePercentile\":{\"35\":8984.62,\"75\":8984.62,\"99\":8984.62,\"10\":8984.62,\"3\":8984.62,\"50\":8984.62},\"hotelName\":\"\\u041e\\u0442\\u0435\\u043b\\u044c \\u041a\\u0443\\u0431\\u0430\\u043d\\u044c\"},{\"location\":{\"name\":\"\\u0412\\u043e\\u0440\\u043e\\u043d\\u0435\\u0436\",\"country\":\"\\u0420\\u043e\\u0441\\u0441\\u0438\\u044f\",\"geo\":{\"lat\":51.662506,\"lon\":39.203988},\"state\":null},\"priceFrom\":7256.81,\"hotelId\":1832200,\"stars\":2,\"priceAvg\":7256.81,\"locationId\":12224,\"pricePercentile\":{\"35\":7256.81,\"75\":7256.81,\"99\":7256.81,\"10\":7256.81,\"3\":7256.81,\"50\":7256.81},\"hotelName\":\"\\u0413\\u043e\\u0441\\u0442\\u0438\\u043d\\u0438\\u0446\\u0430 \\u0411\\u0440\\u0435\\u043c\\u0435\\u043d\"}]";

        ListToJsonObjectListResponseFilter filter = new ListToJsonObjectListResponseFilter("hotelId", new LinkedList<String>(){{add("location__country"); add("location__name"); add("stars");}});
        Response response = filter.filter(new TextResponse(json));


        return;
    }

    @Test
    public void canGetCityFromJsonIfContainsInArray(){
        GetValueIfContainsInArrayFromJsonResponseFilter filter =
                new GetValueIfContainsInArrayFromJsonResponseFilter("/json/other/top_ru.json","iata","index_strings");

        String moscow = filter.filter("Paris");

        return;


    }
}
